{"id":194,"date":"2019-08-23T04:21:04","dateGmt":"2019-08-23T01:21:04","guid":{"rendered":"http://wordpress.loc/?p=194"},"modified":"2019-08-25T06:56:12","modifiedGmt":"2019-08-25T03:56:12","slug":"%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0","status":"publish","type":"post","link":"http://wordpress.loc/?p=194","title":"Установка","excerpt":"<p>Для установки WaR JS на компьютере установить: NodeJS версии не ниже ^10.15.3 С помощью службы npm установить глобально консольное приложение для создания Реакт приложения. npm install -g create-react-app Затем нужно создать приложение React запустив комманду. create-react-app myapp Дождавшись окончания установки, переходим в папку с только что созданным проектом. cd myap Настало время установки warjs, для [&hellip;]</p>\n","excerptProtected":false,"content":"\n<p><strong><em>Для установки WaR JS на компьютере установить:</em></strong></p>\n\n\n\n<ul><li><a href=\"https://nodejs.org/en/download/\">NodeJS</a> версии не ниже <em><strong>^10.15.3</strong></em></li></ul>\n\n\n\n<p>С помощью службы <strong><em>npm</em></strong> установить глобально консольное приложение для создания Реакт приложения.</p>\n\n\n\n<ul><li><code>npm install -g create-react-app</code></li></ul>\n\n\n\n<p>Затем нужно создать приложение React запустив комманду.</p>\n\n\n\n<ul><li><code>create-react-app myapp</code></li></ul>\n\n\n\n<p>Дождавшись окончания установки, переходим в папку с только что созданным проектом.</p>\n\n\n\n<ul><li><code>cd myap</code></li></ul>\n\n\n\n<p>Настало время установки warjs, для этого запустим его установку.</p>\n\n\n\n<ul><li><code>npm install warjs</code></li></ul>\n\n\n\n<p>Затем привести файл src/App.js к следующему виду:</p>\n\n\n\n<pre class=\"wp-block-preformatted\"><code>import React, { Component } from 'react';\nimport { WpDecorator } from 'warjs';\n\nexport default class App extends Component {\n  render () {\n    return (\n      &lt;div&gt;\n        &lt;WpDecorator /&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n</code></pre>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>Внимание! </p><cite>Приложение настроено, но данные из локального сайта ещё не подтянуты.</cite></blockquote>\n\n\n\n<p>Настроить сайт, в <strong><code><em>Настройки</em></code></strong><em> > </em><code><em style=\"\"><b>Постоянные ссылки</b></em></code> > <strong><code>Простые</code></strong>, как показано на изображении:</p>\n\n\n\n<figure class=\"wp-block-image is-resized\"><img src=\"/storage/media/post_194_65494.png\" alt=\"\" class=\"wp-image-207\" width=\"439\" height=\"324\"/></figure>\n\n\n\n<p>Убедившись, что изменения вступили в силу, сделать запрос к сайту, появится дирректория <code><strong><em>storage</em></strong></code><em>/</em>. Копировать её в <code><em><strong>public</strong></em></code>.</p>\n\n\n\n<pre class=\"wp-block-code\"><code>node node_modules/wpdata/index.js --host &lt;http://localhost:8080>[ --path //default . ]</code></pre>\n\n\n\n<pre class=\"wp-block-code\"><code>cp -r storage public/storage</code></pre>\n\n\n\n<p><strong>Примерно так так должен выглядеть сам каталог </strong><code><em><strong>storage</strong></em></code>/</p>\n\n\n\n<p>storage<br>\n├── categories<br>\n│&nbsp;&nbsp; ├── category_15.json<br>\n│&nbsp;&nbsp; ├── category_16.json<br>\n│&nbsp;&nbsp; ├── category_17.json<br>\n│&nbsp;&nbsp; ├── category_18.json<br>\n│&nbsp;&nbsp; └── category_1.json<br>\n├── categories.json<br>\n├── media<br>\n├── pages<br>\n├── pages.json<br>\n├── posts<br>\n│&nbsp;&nbsp; ├── post_147.json<br>\n│&nbsp;&nbsp; ├── post_160.json<br>\n│&nbsp;&nbsp; ├── post_194.json<br>\n│&nbsp;&nbsp; └── post_home.json<br>\n└── posts.json</p>\n\n\n\n<p>На этом установка закончена, затем перейти в корень проекта и запустить сервер, если использовали create-react-app, при установке, тогда команда:</p>\n\n\n\n<ul><li><code>npm start</code></li></ul>\n\n\n\n<pre class=\"wp-block-verse\">После этого должна открыться страница <em><strong>http://localhost:3000</strong></em> и на этой странице будет сайт.<br>Вносите в него изменение на стороне Реакт, а материалы создавайте на Водпресс.<br><strong>Установка завершена!</strong></pre>\n\n\n\n<p>Чтобы запустить сайт в production: собрать build, скопировать каталог <strong><em>storage</em></strong> в<strong> </strong><em><strong>build/storage</strong></em>, и отправить все файлы из папки build прямо в облачное хранилище  с услугой статичный веб сайт.</p>\n\n\n\n<pre class=\"wp-block-code\"><code>npm build</code></pre>\n\n\n\n<p>Если Linux сделать также, если нет тогда по своему:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>rm -rf build/storage &amp;&amp; cp -r &lt; path >/storage build/storage</code></pre>\n\n\n\n<p>Затем загрузить на услугу <a href=\"/post:160\">статический сайт</a>.</p>\n","contentProtected":false,"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","template":"","meta":[],"_links":{"self":[{"href":"http://wordpress.loc/index.php?rest_route=/wp/v2/posts/194"}],"collection":[{"href":"http://wordpress.loc/index.php?rest_route=/wp/v2/posts"}],"about":[{"href":"http://wordpress.loc/index.php?rest_route=/wp/v2/types/post"}],"author":[{"embeddable":true,"href":"http://wordpress.loc/index.php?rest_route=/wp/v2/users/1"}],"replies":[{"embeddable":true,"href":"http://wordpress.loc/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=194"}],"version-history":[{"count":26,"href":"http://wordpress.loc/index.php?rest_route=/wp/v2/posts/194/revisions"}],"predecessor-version":[{"id":288,"href":"http://wordpress.loc/index.php?rest_route=/wp/v2/posts/194/revisions/288"}],"wp:attachment":[{"href":"http://wordpress.loc/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=194"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http://wordpress.loc/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=194"},{"taxonomy":"post_tag","embeddable":true,"href":"http://wordpress.loc/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=194"}],"curies":[{"name":"wp","href":"https://api.w.org/{rel}","templated":true}]},"error":0,"sticky":false,"format":"standard","tags":[],"categories":[18]}